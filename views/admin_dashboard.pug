extends layout

block content
  section.admin-shell
    .admin-header
      h1.admin-title Admin Dashboard
      p.admin-subtitle Manage content and platform operations from one workspace.

    .admin-manage-grid
      .admin-card
        .admin-card-head
          h3.admin-card-title Admin
          a.btn.admin-btn(href="/signup/admin") Add Admin
        p#adminFeedback.admin-feedback.d-none
        ul#adminList.admin-item-list
          li.text-muted Loading admins...

      .admin-card
        .admin-card-head
          h3.admin-card-title Questions
          button#answerQuestionsBtn.btn.admin-btn(type="button" data-no-loading) Answer Questions
        p#questionFeedback.admin-feedback.d-none
        ul#questionList.admin-item-list
          li.text-muted Loading questions...

      .admin-card
        .admin-card-head
          h3.admin-card-title Articles
          a.btn.admin-btn(href="/create_article") Add Article
        p.admin-card-note Draft articles stay private until published.
        p#articleFeedback.admin-feedback.d-none
        ul#articleList.admin-item-list
          li.text-muted Loading articles...

      .admin-card
        .admin-card-head
          h3.admin-card-title Class
          button.btn.admin-btn(type="button" data-bs-toggle="modal" data-bs-target="#classSessionModal") Add Session
        p#liveClassStatus.admin-card-note Live class is currently not active.
        .d-flex.gap-2.mb-2
          button#endLiveClassBtn.btn.btn-outline-danger(type="button" data-no-loading) End Live Class
        p#classFeedback.admin-feedback.d-none
        ul#classList.admin-item-list
          li.text-muted Loading class sessions...
        .admin-link-group
          a.admin-link-chip(href="/registrations/pending") Approve Registrations
          a.admin-link-chip(href="/registration_fee") Update Access Fee

      .admin-card
        .admin-card-head
          h3.admin-card-title Categories
          button.btn.admin-btn(type="button" data-bs-toggle="modal" data-bs-target="#categoryModal") Add Category
        p.admin-card-note Manage video categories and remove outdated groups.
        p#categoryFeedback.admin-feedback.d-none
        ul#categoryList.admin-item-list
          li.text-muted Loading categories...

      .admin-card
        .admin-card-head
          h3.admin-card-title Videos
          button.btn.admin-btn(type="button" data-bs-toggle="modal" data-bs-target="#videoModal") Add Video
        .admin-filter-row
          label.form-label(for="videoCategoryFilter") Filter by category
          select#videoCategoryFilter.form-select
            option(value="") All categories
        p#videoFeedback.admin-feedback.d-none
        ul#videoList.admin-item-list
          li.text-muted Loading videos...

  .modal.fade#categoryModal(tabindex="-1" aria-labelledby="categoryModalLabel" aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          h5#categoryModalLabel.modal-title Add Category
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        form#categoryForm
          .modal-body
            .mb-3
              label.form-label(for="categoryTitle") Category Title
              input#categoryTitle.form-control(type="text" name="title" placeholder="e.g. Quran Reflections" required)
            p#categoryModalFeedback.admin-feedback.d-none
          .modal-footer
            button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal") Cancel
            button.btn.admin-btn(type="submit") Save Category

  .modal.fade#categoryEditModal(tabindex="-1" aria-labelledby="categoryEditModalLabel" aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          h5#categoryEditModalLabel.modal-title Edit Category
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        form#categoryEditForm
          input#categoryEditId(type="hidden" name="categoryId")
          .modal-body
            .mb-3
              label.form-label(for="categoryEditTitle") Category Title
              input#categoryEditTitle.form-control(type="text" name="title" required)
            p#categoryEditModalFeedback.admin-feedback.d-none
          .modal-footer
            button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal") Cancel
            button.btn.admin-btn(type="submit") Save Changes

  .modal.fade#videoModal(tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          h5#videoModalLabel.modal-title Add Video
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        form#videoForm
          .modal-body
            .mb-3
              label.form-label(for="videoTitle") Video Title
              input#videoTitle.form-control(type="text" name="title" required)
            .mb-3
              label.form-label(for="videoCategory") Category
              select#videoCategory.form-select(name="category" required)
                option(value="") Select category
            .mb-3
              label.form-label(for="youtubeUrl") YouTube URL
              input#youtubeUrl.form-control(type="url" name="youtubeUrl" placeholder="https://youtube.com/watch?v=..." required)
            p#videoModalFeedback.admin-feedback.d-none
          .modal-footer
            button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal") Cancel
            button.btn.admin-btn(type="submit") Save Video

  .modal.fade#videoPreviewModal(tabindex="-1" aria-labelledby="videoPreviewModalLabel" aria-hidden="true")
    .modal-dialog.modal-lg
      .modal-content
        .modal-header
          h5#videoPreviewModalLabel.modal-title Video Preview
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        .modal-body
          h6#videoPreviewTitle.mb-3
          .iframe-container
            iframe#videoPreviewFrame(
              src=""
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            )

  .modal.fade#classSessionModal(tabindex="-1" aria-labelledby="classSessionModalLabel" aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          h5#classSessionModalLabel.modal-title Add Session
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        form#classSessionForm
          .modal-body
            .mb-3
              label.form-label(for="classSessionTitle") Session Title
              input#classSessionTitle.form-control(type="text" name="title" required)
            p#classSessionModalFeedback.admin-feedback.d-none
          .modal-footer
            button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal") Cancel
            button.btn.admin-btn(type="submit") Save Session

  .modal.fade#classSessionEditModal(tabindex="-1" aria-labelledby="classSessionEditModalLabel" aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          h5#classSessionEditModalLabel.modal-title Edit Session
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        form#classSessionEditForm
          input#classSessionEditId(type="hidden" name="sessionId")
          .modal-body
            .mb-3
              label.form-label(for="classSessionEditTitle") Session Title
              input#classSessionEditTitle.form-control(type="text" name="title" required)
            p#classSessionEditModalFeedback.admin-feedback.d-none
          .modal-footer
            button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal") Cancel
            button.btn.admin-btn(type="submit") Save Changes

  .modal.fade#questionAnswerModal(tabindex="-1" aria-labelledby="questionAnswerModalLabel" aria-hidden="true")
    .modal-dialog.modal-lg
      .modal-content
        .modal-header
          h5#questionAnswerModalLabel.modal-title Edit Answer
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        form#questionAnswerForm
          input#questionAnswerId(type="hidden" name="questionId")
          .modal-body
            .mb-3
              label.form-label(for="questionAnswerSelect") Pending Questions
              select#questionAnswerSelect.form-select
              small#questionAnswerSelectHint.text-muted
            .mb-3
              label.form-label(for="questionAnswerText") Question
              textarea#questionAnswerText.form-control(rows="3" readonly)
            .mb-3
              label.form-label(for="questionAnswerInput") Answer
              textarea#questionAnswerInput.form-control(name="answer" rows="8" required)
            p#questionAnswerModalFeedback.admin-feedback.d-none
          .modal-footer
            button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal") Cancel
            button.btn.admin-btn(type="submit") Save Answer

  .modal.fade#classSessionUsersModal(tabindex="-1" aria-labelledby="classSessionUsersModalLabel" aria-hidden="true")
    .modal-dialog.modal-lg
      .modal-content
        .modal-header
          h5#classSessionUsersModalLabel.modal-title Session Users
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        .modal-body
          p#classSessionUsersTitle.fw-bold.mb-3
          ul#classSessionUsersList.admin-item-list
            li.text-muted Loading users...

  .modal.fade#deleteConfirmModal(tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          h5#deleteConfirmModalLabel.modal-title Confirm Delete
          button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
        .modal-body
          p#deleteConfirmMessage.mb-0 Are you sure you want to delete this item?
        .modal-footer
          button.btn.btn-outline-secondary(type="button" data-bs-dismiss="modal") Cancel
          button#deleteConfirmButton.btn.btn-danger(type="button") Delete

block scripts
  script(src="/javascripts/adminDashboard.js")
